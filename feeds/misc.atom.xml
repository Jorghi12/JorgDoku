<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Sang Han</title><link href="http://sanghan.me/" rel="alternate"></link><link href="http://sanghan.me/feeds/misc.atom.xml" rel="self"></link><id>http://sanghan.me/</id><updated>2014-05-29T00:00:00-07:00</updated><entry><title>Bourne AgainÂ Programmer</title><link href="http://sanghan.me/blog/2014/05/my-first-program/" rel="alternate"></link><updated>2014-05-29T00:00:00-07:00</updated><author><name>Sang Han</name></author><id>tag:sanghan.me,2014-05-29:blog/2014/05/my-first-program/</id><summary type="html">&lt;p&gt;I have a love hate relationship with the unix terminal. For many who write software
the shell is a dark abyss of programs past and write off it&amp;#8217;s presence as
a relic of tradition. For others, the terminal is a gate into a small quiet
piece of patch of space they own to hang their tools and work in&amp;nbsp;peace.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt;  1&lt;/span&gt; &lt;span class="c"&gt;#!/usr/bin/env bash&lt;/span&gt;
&lt;span class="lineno"&gt;  2&lt;/span&gt; usage&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; cat &lt;span class="s"&gt;&amp;lt;&amp;lt;- DOCUMENT&lt;/span&gt;
&lt;span class="lineno"&gt;  3&lt;/span&gt; 
&lt;span class="lineno"&gt;  4&lt;/span&gt; &lt;span class="s"&gt;    $PROGNAME [-h] [-t] [-k key] [-l login] [server]&lt;/span&gt;
&lt;span class="lineno"&gt;  5&lt;/span&gt; 
&lt;span class="lineno"&gt;  6&lt;/span&gt; &lt;span class="s"&gt;    Utility for automatically exporting ssh keys into remote servers for authentication.&lt;/span&gt;
&lt;span class="lineno"&gt;  7&lt;/span&gt; &lt;span class="s"&gt;    Checks $HOME/.ssh for id_rsa.pub or id_dsa.pub and appends them into&lt;/span&gt;
&lt;span class="lineno"&gt;  8&lt;/span&gt; &lt;span class="s"&gt;    the authorized_keys of remote host&lt;/span&gt;
&lt;span class="lineno"&gt;  9&lt;/span&gt; 
&lt;span class="lineno"&gt; 10&lt;/span&gt; &lt;span class="s"&gt;    AUTHOR:     Sang Han&lt;/span&gt;
&lt;span class="lineno"&gt; 11&lt;/span&gt; &lt;span class="s"&gt;    YEAR:       2013&lt;/span&gt;
&lt;span class="lineno"&gt; 12&lt;/span&gt; &lt;span class="s"&gt;    VERSION:    2.3&lt;/span&gt;
&lt;span class="lineno"&gt; 13&lt;/span&gt; 
&lt;span class="lineno"&gt; 14&lt;/span&gt; &lt;span class="s"&gt;    -h [help]&lt;/span&gt;
&lt;span class="lineno"&gt; 15&lt;/span&gt; &lt;span class="s"&gt;        Outputs usage directions&lt;/span&gt;
&lt;span class="lineno"&gt; 16&lt;/span&gt; &lt;span class="s"&gt;    -t [test]&lt;/span&gt;
&lt;span class="lineno"&gt; 17&lt;/span&gt; &lt;span class="s"&gt;        Runs unit tests&lt;/span&gt;
&lt;span class="lineno"&gt; 18&lt;/span&gt; &lt;span class="s"&gt;    -k [key]&lt;/span&gt;
&lt;span class="lineno"&gt; 19&lt;/span&gt; &lt;span class="s"&gt;        Specify your own public key located in $HOME/.ssh directory&lt;/span&gt;
&lt;span class="lineno"&gt; 20&lt;/span&gt; &lt;span class="s"&gt;    -l [login]&lt;/span&gt;
&lt;span class="lineno"&gt; 21&lt;/span&gt; &lt;span class="s"&gt;        Specify user login credentials&lt;/span&gt;
&lt;span class="lineno"&gt; 22&lt;/span&gt; 
&lt;span class="lineno"&gt; 23&lt;/span&gt; 
&lt;span class="lineno"&gt; 24&lt;/span&gt; &lt;span class="s"&gt;    DOCUMENT&lt;/span&gt;
&lt;span class="lineno"&gt; 25&lt;/span&gt;     &lt;span class="nb"&gt;exit &lt;/span&gt;0
&lt;span class="lineno"&gt; 26&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 27&lt;/span&gt; 
&lt;span class="lineno"&gt; 28&lt;/span&gt; &lt;span class="c"&gt;# Global Variables&lt;/span&gt;
&lt;span class="lineno"&gt; 29&lt;/span&gt; &lt;span class="nv"&gt;PROGNAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$(basename &amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;)&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 30&lt;/span&gt; 
&lt;span class="lineno"&gt; 31&lt;/span&gt; &lt;span class="k"&gt;function &lt;/span&gt;error_exit&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 32&lt;/span&gt;     &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ERROR due to %s&amp;quot;&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;${1:-&amp;quot;&lt;/span&gt;Unknown Error&lt;span class="s2"&gt;&amp;quot;}&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 33&lt;/span&gt;     &lt;span class="nb"&gt;exit &lt;/span&gt;1
&lt;span class="lineno"&gt; 34&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 35&lt;/span&gt; 
&lt;span class="lineno"&gt; 36&lt;/span&gt; &lt;span class="k"&gt;function &lt;/span&gt;test_names&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 37&lt;/span&gt;     &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\$KEY is %s\n&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${KEY[i]}&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 38&lt;/span&gt;     &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\$PUBKEY is %s\n&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${PUBKEY[i]}&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 39&lt;/span&gt;     &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\$LOGIN_USER is %s\n&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${LOGIN_USER}&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 40&lt;/span&gt;     &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\$SERVER is %s\n&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${SERVER}&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 41&lt;/span&gt;     &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 42&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 43&lt;/span&gt; 
&lt;span class="lineno"&gt; 44&lt;/span&gt; &lt;span class="k"&gt;function &lt;/span&gt;install_keys&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 45&lt;/span&gt;     &lt;span class="c"&gt;# Reads the public key file with cat and then logs into ssh server&lt;/span&gt;
&lt;span class="lineno"&gt; 46&lt;/span&gt;     &lt;span class="c"&gt;# and appends the public key file at the end of the authorized_key file&lt;/span&gt;
&lt;span class="lineno"&gt; 47&lt;/span&gt;     &lt;span class="c"&gt;# within $HOME&lt;/span&gt;
&lt;span class="lineno"&gt; 48&lt;/span&gt;     cat &amp;lt; &lt;span class="s2"&gt;&amp;quot;${PUBKEY[i]}&amp;quot;&lt;/span&gt; | &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="lineno"&gt; 49&lt;/span&gt;         ssh -l &lt;span class="s2"&gt;&amp;quot;$LOGIN_USER&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$SERVER&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\&lt;/span&gt;
&lt;span class="lineno"&gt; 50&lt;/span&gt; &lt;span class="s2"&gt;            if [ -d ~/.ssh ]; then \&lt;/span&gt;
&lt;span class="lineno"&gt; 51&lt;/span&gt; &lt;span class="s2"&gt;                cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys; \&lt;/span&gt;
&lt;span class="lineno"&gt; 52&lt;/span&gt; &lt;span class="s2"&gt;            else \&lt;/span&gt;
&lt;span class="lineno"&gt; 53&lt;/span&gt; &lt;span class="s2"&gt;                mkdir ~/.ssh; \&lt;/span&gt;
&lt;span class="lineno"&gt; 54&lt;/span&gt; &lt;span class="s2"&gt;                cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys; \&lt;/span&gt;
&lt;span class="lineno"&gt; 55&lt;/span&gt; &lt;span class="s2"&gt;            fi&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 56&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 57&lt;/span&gt; 
&lt;span class="lineno"&gt; 58&lt;/span&gt; &lt;span class="k"&gt;function &lt;/span&gt;check_keys&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 59&lt;/span&gt;     &lt;span class="c"&gt;# Checks $HOME/.ssh directory for default keys&lt;/span&gt;
&lt;span class="lineno"&gt; 60&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.ssh/*.pub &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt; 61&lt;/span&gt; &lt;span class="k"&gt;        return&lt;/span&gt;
&lt;span class="lineno"&gt; 62&lt;/span&gt; &lt;span class="k"&gt;    else&lt;/span&gt;
&lt;span class="lineno"&gt; 63&lt;/span&gt; &lt;span class="k"&gt;        &lt;/span&gt;error_exit &lt;span class="s2"&gt;&amp;quot;missing ssh public keys&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 64&lt;/span&gt;     &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="lineno"&gt; 65&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 66&lt;/span&gt; 
&lt;span class="lineno"&gt; 67&lt;/span&gt; &lt;span class="k"&gt;function &lt;/span&gt;check_auth&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 68&lt;/span&gt;     &lt;span class="c"&gt;# Checks if proper credentials have been given as $1. After credential has&lt;/span&gt;
&lt;span class="lineno"&gt; 69&lt;/span&gt;     &lt;span class="c"&gt;# been checked, will read and bind the variable.&lt;/span&gt;
&lt;span class="lineno"&gt; 70&lt;/span&gt;     &lt;span class="nb"&gt;local &lt;/span&gt;&lt;span class="nv"&gt;CREDENTIAL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
&lt;span class="lineno"&gt; 71&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; ! &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="p"&gt;!CREDENTIAL&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt; 72&lt;/span&gt; &lt;span class="k"&gt;        &lt;/span&gt;&lt;span class="nb"&gt;read&lt;/span&gt; -p &lt;span class="s2"&gt;&amp;quot;${CREDENTIAL}:  &amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${CREDENTIAL}&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 73&lt;/span&gt;     &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="lineno"&gt; 74&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 75&lt;/span&gt; 
&lt;span class="lineno"&gt; 76&lt;/span&gt; &lt;span class="k"&gt;function &lt;/span&gt;check_server&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 77&lt;/span&gt;     &lt;span class="nv"&gt;SERVER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
&lt;span class="lineno"&gt; 78&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$SERVER&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;~ @ &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt; 79&lt;/span&gt; &lt;span class="k"&gt;        &lt;/span&gt;&lt;span class="nv"&gt;LOGIN_USER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SERVER&lt;/span&gt;&lt;span class="p"&gt;%@*&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 80&lt;/span&gt;         &lt;span class="nv"&gt;SERVER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SERVER&lt;/span&gt;&lt;span class="p"&gt;#*@&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 81&lt;/span&gt;         &lt;span class="k"&gt;return&lt;/span&gt;
&lt;span class="lineno"&gt; 82&lt;/span&gt; &lt;span class="k"&gt;    fi&lt;/span&gt;
&lt;span class="lineno"&gt; 83&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 84&lt;/span&gt; 
&lt;span class="lineno"&gt; 85&lt;/span&gt; main&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 86&lt;/span&gt;     &lt;span class="c"&gt;# Declare default key files to find if user does not specify&lt;/span&gt;
&lt;span class="lineno"&gt; 87&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; -z &lt;span class="nv"&gt;$KEY&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then &lt;/span&gt;&lt;span class="nb"&gt;declare&lt;/span&gt; -a &lt;span class="nv"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;id_rsa&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;id_dsa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;; &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="lineno"&gt; 88&lt;/span&gt; 
&lt;span class="lineno"&gt; 89&lt;/span&gt; &lt;span class="k"&gt;    for&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt; &lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0; i&amp;lt;&lt;span class="k"&gt;${#&lt;/span&gt;&lt;span class="nv"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;; i+&lt;span class="o"&gt;=&lt;/span&gt;1 &lt;span class="o"&gt;))&lt;/span&gt;; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;span class="lineno"&gt; 90&lt;/span&gt;         &lt;span class="c"&gt;# Path to key file&lt;/span&gt;
&lt;span class="lineno"&gt; 91&lt;/span&gt;         &lt;span class="nb"&gt;local &lt;/span&gt;PUBKEY&lt;span class="o"&gt;[&lt;/span&gt;i&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/.ssh/&lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;[i]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;.pub
&lt;span class="lineno"&gt; 92&lt;/span&gt; 
&lt;span class="lineno"&gt; 93&lt;/span&gt;         &lt;span class="c"&gt;# Unit Test runs every iteration&lt;/span&gt;
&lt;span class="lineno"&gt; 94&lt;/span&gt;         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="nv"&gt;TEST&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;1&lt;span class="o"&gt;))&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt; 95&lt;/span&gt; &lt;span class="k"&gt;            &lt;/span&gt;test_names
&lt;span class="lineno"&gt; 96&lt;/span&gt;             &lt;span class="k"&gt;return&lt;/span&gt;
&lt;span class="lineno"&gt; 97&lt;/span&gt; &lt;span class="k"&gt;        fi&lt;/span&gt;
&lt;span class="lineno"&gt; 98&lt;/span&gt; 
&lt;span class="lineno"&gt; 99&lt;/span&gt;         &lt;span class="c"&gt;# Gather necessary login credentials&lt;/span&gt;
&lt;span class="lineno"&gt;100&lt;/span&gt;         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; -r &lt;span class="s2"&gt;&amp;quot;${PUBKEY[i]}&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt;101&lt;/span&gt; &lt;span class="k"&gt;            &lt;/span&gt;check_auth LOGIN_USER
&lt;span class="lineno"&gt;102&lt;/span&gt;             check_auth SERVER
&lt;span class="lineno"&gt;103&lt;/span&gt;             install_keys &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;break&lt;/span&gt;
&lt;span class="lineno"&gt;104&lt;/span&gt; &lt;span class="nb"&gt;        &lt;/span&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="lineno"&gt;105&lt;/span&gt; &lt;span class="k"&gt;    done&lt;/span&gt;
&lt;span class="lineno"&gt;106&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;107&lt;/span&gt; 
&lt;span class="lineno"&gt;108&lt;/span&gt; &lt;span class="c"&gt;# Option Parsing&lt;/span&gt;
&lt;span class="lineno"&gt;109&lt;/span&gt; &lt;span class="nb"&gt;declare&lt;/span&gt; -i &lt;span class="nv"&gt;TEST&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="lineno"&gt;110&lt;/span&gt; &lt;span class="k"&gt;while &lt;/span&gt;&lt;span class="nb"&gt;getopts&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;:k:l:th&amp;quot;&lt;/span&gt; OPTION; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;span class="lineno"&gt;111&lt;/span&gt; &lt;span class="k"&gt;    case&lt;/span&gt; &lt;span class="nv"&gt;$OPTION&lt;/span&gt; in
&lt;span class="lineno"&gt;112&lt;/span&gt;         h&lt;span class="o"&gt;)&lt;/span&gt; usage
&lt;span class="lineno"&gt;113&lt;/span&gt;             ;;
&lt;span class="lineno"&gt;114&lt;/span&gt;         k&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$OPTARG&lt;/span&gt;
&lt;span class="lineno"&gt;115&lt;/span&gt;              ;;
&lt;span class="lineno"&gt;116&lt;/span&gt;         t&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;TEST&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="lineno"&gt;117&lt;/span&gt;               ;;
&lt;span class="lineno"&gt;118&lt;/span&gt;         l&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;LOGIN_USER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$OPTARG&lt;/span&gt;
&lt;span class="lineno"&gt;119&lt;/span&gt;              ;;
&lt;span class="lineno"&gt;120&lt;/span&gt;         ?&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Invalid option: -${OPTARG}&amp;quot;&lt;/span&gt;; usage; &lt;span class="o"&gt;}&lt;/span&gt; &amp;gt;&amp;amp;2
&lt;span class="lineno"&gt;121&lt;/span&gt;              &lt;span class="nb"&gt;exit &lt;/span&gt;1
&lt;span class="lineno"&gt;122&lt;/span&gt;              ;;
&lt;span class="lineno"&gt;123&lt;/span&gt;     &lt;span class="k"&gt;esac&lt;/span&gt;
&lt;span class="lineno"&gt;124&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;span class="lineno"&gt;125&lt;/span&gt; &lt;span class="k"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;shift&lt;/span&gt; &lt;span class="k"&gt;$((&lt;/span&gt;OPTIND-1&lt;span class="k"&gt;))&lt;/span&gt;
&lt;span class="lineno"&gt;126&lt;/span&gt; 
&lt;span class="lineno"&gt;127&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$0&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;${BASH_SOURCE}&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt;128&lt;/span&gt; 
&lt;span class="lineno"&gt;129&lt;/span&gt;     &lt;span class="c"&gt;# Validate user input&lt;/span&gt;
&lt;span class="lineno"&gt;130&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$# &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; 1 &lt;span class="o"&gt;]]&lt;/span&gt;; &lt;span class="k"&gt;then &lt;/span&gt;check_server &lt;span class="s2"&gt;&amp;quot;$1&amp;quot;&lt;/span&gt;; &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="lineno"&gt;131&lt;/span&gt; &lt;span class="k"&gt;    &lt;/span&gt;check_keys
&lt;span class="lineno"&gt;132&lt;/span&gt; 
&lt;span class="lineno"&gt;133&lt;/span&gt;     main
&lt;span class="lineno"&gt;134&lt;/span&gt; &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</summary></entry></feed>